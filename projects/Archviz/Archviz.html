<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Archviz — SHERVIN PEYGHAMBARI OSKOUI</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,200;0,300;0,500;1,200&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/styles.css" />
  <link rel="icon" type="image/png" href="/favicon.png" />
  <style>
    /* minimal lightbox styles, keeps your theme */
    .lightbox-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,.7);
      display: none; align-items: center; justify-content: center; z-index: 9999;
    }
    .lightbox-open { overflow: hidden; }
    .lightbox {
      max-width: 90vw; max-height: 90vh; box-shadow: 0 10px 40px rgba(0,0,0,.5);
      border: 1px solid #2a2d36; border-radius: 16px; background: #0f1116; padding: .5rem;
    }
    .lightbox img { display: block; max-width: 88vw; max-height: 86vh; border-radius: 12px; }
    .lb-close {
      position: absolute; top: 18px; right: 22px; font-size: 28px; color: #e6e6e6;
      background: transparent; border: none; cursor: pointer; line-height: 1;
    }
    .lb-nav {
      position: absolute; inset: 0; display: flex; align-items: center; justify-content: space-between;
      pointer-events: none;
    }
    .lb-btn {
      pointer-events: auto; background: rgba(0,0,0,.35); border: 1px solid #2a2d36;
      color: #e6e6e6; border-radius: 12px; padding: .5rem .7rem; margin: 0 .5rem; cursor: pointer;
    }
    .thumb-wrap img { object-fit: cover; }
  </style>
</head>
<body>
  <header class="site-header">
    <h1><a href="./">SHERVIN PEYGHAMBARI OSKOUI</a></h1>
  </header>

  <main class="container">
    <h2 style="font-weight:300;margin:0 0 .75rem;">Archviz</h2>
    <div id="grid" class="grid"></div>
    <template id="thumb-tmpl">
      <button class="card" data-index="0" aria-label="Open image">
        <div class="thumb-wrap">
          <img loading="lazy" alt="">
        </div>
      </button>
    </template>
  </main>

  <div id="backdrop" class="lightbox-backdrop" aria-hidden="true">
    <button class="lb-close" aria-label="Close (Esc)">×</button>
    <div class="lightbox">
      <img id="lb-img" alt="preview">
      <div class="lb-nav">
        <button id="prev" class="lb-btn" aria-label="Previous (←)">←</button>
        <button id="next" class="lb-btn" aria-label="Next (→)">→</button>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <p><a href="./">← Back to projects</a></p>
  </footer>

  <script>
    // Build image list image_1..image_24
    const IMAGES = Array.from({length: 24}, (_, i) => ({
      src: `projects/Archviz/media/image_${i+1}.jpg`,
      alt: `image_${i+1}`
    }));

    const grid = document.getElementById('grid');
    const tmpl = document.getElementById('thumb-tmpl');
    IMAGES.forEach((img, idx) => {
      const el = tmpl.content.firstElementChild.cloneNode(true);
      el.dataset.index = idx;
      const im = el.querySelector('img');
      im.src = img.src;
      im.alt = img.alt;
      el.addEventListener('click', () => openLightbox(idx));
      grid.appendChild(el);
    });

    const backdrop = document.getElementById('backdrop');
    const lbImg = document.getElementById('lb-img');
    const closeBtn = document.querySelector('.lb-close');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    let current = 0;

    function openLightbox(idx) {
      current = idx;
      lbImg.src = IMAGES[current].src;
      lbImg.alt = IMAGES[current].alt;
      backdrop.style.display = 'flex';
      backdrop.setAttribute('aria-hidden', 'false');
      document.body.classList.add('lightbox-open');
    }
    function closeLightbox() {
      backdrop.style.display = 'none';
      backdrop.setAttribute('aria-hidden', 'true');
      document.body.classList.remove('lightbox-open');
      lbImg.src = '';
    }
    function nav(delta) {
      current = (current + delta + IMAGES.length) % IMAGES.length;
      lbImg.src = IMAGES[current].src;
      lbImg.alt = IMAGES[current].alt;
    }

    // Events
    closeBtn.addEventListener('click', closeLightbox);
    backdrop.addEventListener('click', (e) => {
      if (e.target === backdrop) closeLightbox();
    });
    prevBtn.addEventListener('click', (e) => { e.stopPropagation(); nav(-1); });
    nextBtn.addEventListener('click', (e) => { e.stopPropagation(); nav(1); });
    window.addEventListener('keydown', (e) => {
      if (backdrop.getAttribute('aria-hidden') === 'true') return;
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowLeft') nav(-1);
      if (e.key === 'ArrowRight') nav(1);
    });
  </script>
</body>
</html>
